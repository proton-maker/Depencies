{"version":3,"file":"chunk-browser-init.js","sources":["../../src/browser-init.ts"],"sourcesContent":["import { Millennium } from './millennium-api';\r\n\r\nfunction addStyleSheetFromText(document: Document, innerStyle: string, id?: string) {\r\n\tif (document.querySelectorAll(`style[id='${id}']`).length) return;\r\n\r\n\tdocument.head.appendChild(Object.assign(document.createElement('style'), { id: id })).innerText = innerStyle;\r\n}\r\n\r\ntype SystemColors = Record<string, string>;\r\n\r\nexport async function appendAccentColor() {\r\n\tconst systemColors: SystemColors = JSON.parse(await Millennium.callServerMethod('core', 'Core_GetSystemColors'));\r\n\r\n\tconst entries = Object.entries(systemColors)\r\n\t\t.map(([key, value]) => {\r\n\t\t\tconst formattedKey = formatCssVarKey(key);\r\n\t\t\treturn `--SystemAccentColor${formattedKey}: ${value};`;\r\n\t\t})\r\n\t\t.join('\\n');\r\n\r\n\taddStyleSheetFromText(document, `:root {\\n${entries}\\n}`, 'SystemAccentColorInject');\r\n}\r\n\r\nexport async function appendQuickCss() {\r\n\ttry {\r\n\t\tconst quickCss: string = await Millennium.callServerMethod('core', 'Core_LoadQuickCss');\r\n\t\taddStyleSheetFromText(document, quickCss, 'MillenniumQuickCss');\r\n\t} catch {}\r\n}\r\n\r\nexport async function addPluginDOMBreadCrumbs(enabledPlugins: string[] = []) {\r\n\tdocument.documentElement.setAttribute('data-millennium-plugin', enabledPlugins.join(' '));\r\n\tdocument.documentElement.classList.add('MillenniumWindow_SteamBrowser');\r\n}\r\n\r\nfunction formatCssVarKey(key: string) {\r\n\t// Capitalize first letter and convert \"Rgb\" to \"-RGB\"\r\n\treturn key.replace(/Rgb$/, '-RGB').replace(/^./, (c) => c.toUpperCase());\r\n}\r\n"],"names":["addStyleSheetFromText","document","innerStyle","id","querySelectorAll","length","head","appendChild","Object","assign","createElement","innerText","appendAccentColor","_b","_a","JSON","parse","Millennium","callServerMethod","systemColors","apply","_c","sent","entries","map","key","value","formattedKey","replace","c","toUpperCase","formatCssVarKey","concat","join","appendQuickCss","quickCss","addPluginDOMBreadCrumbs","enabledPlugins","documentElement","setAttribute","classList","add"],"mappings":"mGAEA,SAASA,EAAsBC,EAAoBC,EAAoBC,GAClEF,EAASG,iBAAiB,oBAAaD,EAAE,OAAME,SAEnDJ,EAASK,KAAKC,YAAYC,OAAOC,OAAOR,EAASS,cAAc,SAAU,CAAEP,GAAIA,KAAOQ,UAAYT,EACnG,UAIsBU,wGACyB,OAAXC,GAAAC,EAAAC,MAAKC,MAAM,CAAA,EAAMC,EAAWC,iBAAiB,OAAQ,uCAAlFC,EAA6BN,EAAAO,MAAAN,EAAA,CAAWO,EAAAC,SAExCC,EAAUf,OAAOe,QAAQJ,GAC7BK,IAAI,SAACV,OAACW,EAAGX,EAAA,GAAEY,EAAKZ,EAAA,GACVa,EAoBT,SAAyBF,GAExB,OAAOA,EAAIG,QAAQ,OAAQ,QAAQA,QAAQ,KAAM,SAACC,GAAM,OAAAA,EAAEC,aAAF,EACzD,CAvBwBC,CAAgBN,GACrC,MAAO,sBAAAO,OAAsBL,EAAY,MAAAK,OAAKN,MAC/C,GACCO,KAAK,MAEPjC,EAAsBC,SAAU,YAAA+B,OAAYT,EAAO,OAAO,mCAC1D,UAEqBW,kGAEK,6BAAA,CAAA,EAAMjB,EAAWC,iBAAiB,OAAQ,oCAA7DiB,EAAmBtB,EAAAS,OACzBtB,EAAsBC,SAAUkC,EAAU,8EAE3C,UAEqBC,4CAAwBC,eAAA,IAAAA,IAAAA,EAAA,8BAC7CpC,SAASqC,gBAAgBC,aAAa,yBAA0BF,EAAeJ,KAAK,MACpFhC,SAASqC,gBAAgBE,UAAUC,IAAI,wCACvC"}